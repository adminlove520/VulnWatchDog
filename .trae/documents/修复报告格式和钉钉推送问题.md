## 修复计划

### 1. 修复报告格式问题
- **问题**：生成的报告中"详情"部分格式不正确，可能是因为`{markdown}`变量中包含了完整的markdown格式，导致嵌套问题
- **解决方案**：修改`template/report.md`模板，调整"详情"部分的格式，确保`{markdown}`变量中的内容能正确显示
- **修改内容**：
  - 调整模板结构，确保`{markdown}`内容能正确渲染
  - 确保报告整体格式与预期一致

### 2. 修复钉钉推送格式问题
- **问题**：钉钉推送模板与用户期望的格式不一致，缺少换行和特定格式
- **解决方案**：修改`template/dingtalk.json`模板，使其与用户期望的格式一致
- **修改内容**：
  - 调整标题格式为`【漏洞预警】{gpt.name}`
  - 调整基本信息、漏洞详情、相关资源、安全建议等部分的格式
  - 确保使用正确的换行和缩进
  - 调整完整分析报告和发布时间的格式

### 3. 验证修复效果
- **运行程序**：使用`python main.py --limit 1`命令测试修复效果
- **检查报告**：查看生成的markdown报告格式是否正确
- **检查推送**：查看钉钉推送内容是否与预期格式一致

### 4. 预期效果
- 生成的报告格式正确，"详情"部分能正确显示
- 钉钉推送内容格式与用户期望一致
- 程序能正常运行，无错误

### 5. 风险评估
- 修复仅涉及模板文件，不影响核心功能
- 模板修改简单，风险较低
- 验证过程简单，容易确认修复效果